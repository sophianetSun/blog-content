Author: 김선우
Date: 2024-04-12
Tag: 리액트
Status: pub

리액트에는 useCallback 이라는 훅(Hook)이 존재한다. 리액트 16버전에 함수형 컴포넌트가 도입된 이후, 공식 문서에서도 권장하고 있고, 실무에서도 많은 개발자들이 클래스 형 컴포넌트의 상태관리의 복잡함 보다는 함수형 컴포넌트의 단순함과 직관성 때문에 더 선호되고 있다. (물론 나도 함수형 컴포넌트를 무척 선호한다.)

    클래스형 컴포넌트의 예

    함수형 컴포넌트의 예

함수형 프로그래밍 언어인 클로저를 접한 이후로는 함수형 프로그래밍에 대해 좀 더 알게 되고, 함수형 리액트 컴포넌트의 동작 방식이 좀 더 잘 이해하게 되고, 코드 구현에도 많은 도움을 받았다.

    클래스형(OOP; Object Oriented Programming) 도표

    함수형(FP; Functional Programming) 도표

함수형 프로그래밍에서 중요시 하는 부분이 바로 멱등성(idempotent) 인데, 용어가 어렵지만 원칙은 간단하다. 같은 입력에 대해 같은 출력이 나오면 되는 것이다. 수학에서의 함수가 정확히 같은 원칙으로 정의되어 있다.

그러니 함수형 프로그래밍은 같은 입력에 대해 같은 출력을 보여주면 되는 것인데, 현실 세계에서의 프로그래밍은 이렇게 간단하진 않다. 우리가 프로그래밍에서 기대하는 것은 수학에서의 함수처럼 단순히 주어진 입력에 대한 값 뿐만이 아니라, 함수가 실행되었을 때 그에 따라 발생하는 여러 결과들을 원할 수 있다.

리액트에서 예를 들면, 폼에서 제출 버튼이 눌린 경우 입력 값이 전송 된다던가, 패스워드 입력창에 패스워드를 입력하면 패스워드의 길이를 체크해서 짧으면 메시지를 보여준다던가 하는 것들 말이다. 보통 함수형 프로그래밍에서는 이런 것들을 side effect(위키백과에서는 부작용으로 표기하고 있다)라고 하는데(Eric Normad의 Grokking Functional Programming 참고), 이는 현실 세계 프로그래밍에서는 당연한 부분인 것이다.

OOP 프로그래밍에서는 이런 사이드 이펙트는 당연한 것이다. 사람, 물체를 기반으로 프로그래밍을 생각하는 OOP에서는 어떠한 함수 호출에 의해 상태값이 변경되고, 그에 따른 사이드 이펙트가 일어나는 것이 당연하다. 그러나 이런 특징은 FP에서는 사이드 이펙터는 (이론적으로서는)지양해야 할 부분인 것이다.

이런 원칙은 리액트의 함수형 컴포넌트에서도 반영되어 있다. 리액트의 함수형 컴포넌트는 입력 받는 Props(Property)의 값에 대한 결과 값으로 Return 값에 HTML 로 구성되는 리액트 엘리먼트들을 반환하게 되는데, 이 엘리먼트들은 같은 파라미터, Props에 대하여 같은 엘리먼트들을 리턴해야 된다.

하지만 이런 순수 함수를 넘어 현실 세계에 속하기 위한 것이 바로 여기에서 이야기 하고 있는 리액트의 훅(Hook)이라 할 수 있다. 훅에는 useState, useReducer, useEffect, useCallback 등 기본적으로 내장된 것 뿐 아니라 다른 사람이 개발해서 사용하는 라이브러리 형식의 커스텀 훅, 개발자 본인이 개발해서 사용하는 커스텀 훅 등이 될 수 있다.
